<!DOCTYPE html>
<html>
<head>
	<meta charset=UTF-8 />
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="supplemental.css">
	<link rel="stylesheet" type="text/css" href="marathon.css">	
	<title>Marathon Visualization</title>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.10.0/d3.min.js"></script>
</head>
<body>

<div class="heading">
<div class="container">
<h1 class="h1title"> GEOFFREY SCOTT</h1>
<h4 class="h4title"> Mathematician / Machine Learning Engineer</h4>
</div>
</div>
<div class="container">

	<nav class="navbar navbar-default">
	
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-nav-demo" aria-expanded="false">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			</button>
		</div>
		<div class="collapse navbar-collapse" id="bs-nav-demo">
		<ul class="nav navbar-nav navbar-left">
			<li><a href="index.html">Home</a> </li>
			<li><a href="teaching.html">Teaching</a></li>
			<li><a href="research.html">Math Research</a></li>
			<li><a href="machinelearning.html">Machine Learning</a></li>
			<li><a href="cv.html">CV</a></li>
		</ul>
		<ul class="nav navbar-nav navbar-right">
			<li><a href="contact.html"><i class="fa fa-envelope-open-o" aria-hidden="true"></i> Contact</a></li>
		</ul>
		</div>
	
	</nav>
<hr class="bottomhr">


All the data from this page was collected from <a href="http://www.torontowaterfrontmarathon.com/wp-content/themes/crs/resultsmenu/results-menu-stwm.php"> this database </a> of finishing statistics for the Toronto Waterfront Marathon. I omitted all participants who did not finish or were disqualified.

<h3 class="subsection"> Finishing Time</h3>

The plot below shows the finishing times of participants of the Toronto Waterfront Marathon from 2002 to 2016. You can filter the results by age, year, and gender.
<br>
<br>
<div class="svgholder">
<svg id="marathon_plot"></svg>
</div>

It's neat to see the big bumps below the common goal times of 3:00, 3:30, and 4:00, especially in 2014. I ran the 2015 and 2016 marathons and felt that 2016 was the harder year. I feel vindicated by the data, which shows that 2016 was the slowest race (by median finish time) of the last fifteen years. Let's hope 2017 goes better!


<h3 class="subsection"> Splits</h3>

The plot below compares the pace of the runners during different segments of the race to their average pace over the entire race. For example, the violin plot labelled '0-10km' measures (pace for first 10k (sec/km)) minus (entire race pace (sec/km)). The big bump around -8 means that a lot of people ran their first 10k at a pace roughly -8 seconds/km faster than their overall race pace. You can filter these results by age, gender, and finishing time. You can also change which segment you're comparing against by clicking on the title of the plot.
<div class="svgholder">
<svg id="marathon_plot2"></svg>
</div>

It's fun to see how the faster runners have more even splits but still tend to start out fast and then slow down, just like the midpack runners. Also, look at how well the 21.1-30km pace predicts your overall race pace. So if you're at 30km, maybe the best way to predict your result is to take your pace since the halfway point in min/km, and multiply by 42.2/8.9. At least this gives you some mental math to keep your mind off the pain of the last 12k of the race. <br> <br>

A few warnings about this visualization:
<ul>
<li> The 40-42.2km segment is much shorter than the other segments. Because of this, for purely statistical reasons we'd expect there to be more variability in runners' paces over 40-42.2km than in the other segments. This is true even if we ignore all the other psychological and physiological reasons that people go abnormally fast or slow at the end of a marathon. So don't overanalyze the 40-42.2km segment. It's just there for fun!</li>
<li> If you're running a 4:00 min/km pace, then a 20 sec/km deviation from this pace represents a dramatic difference in speed; if you're running a 7:00 min/km pace, then a 20 sec/km deviation doesn't change your speed much. For this reason, the raw pace difference is a flawed measure of how ``even'' splits are. If I spend more time on this visualization, I might include the option to measure the pace deviations as percentages of average pace, rather than absolute pace differences.</li>
<li> There are problems with the 2012 data -- many runners are recorded as finishing the race before they hit the 40km checkpoint. I think the 40km checkpoint was just buggy that year, so the plot above does not use the 2012 data when plotting any statistic that uses the 35-40km or 40km-42.2km paces.</li>
</ul>




<script type="text/javascript" src="marathon.js"></script>


<script type="text/javascript" src="marathon2.js"></script>
</body>
</html>